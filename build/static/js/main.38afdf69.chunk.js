(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{122:function(e,t){},132:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),s=a.n(c),o=a(7),l=a(145),i=a(138),u=a(3),m=a.n(u),p=a(12),d=a.n(p),f=a(22),E=a(135),v=a(136),y=a(137),h=a(139),b=a(140),g={host:window.location.hostname},O=a(62),x=a(63),j=new(function(){function e(){var t=this;Object(O.a)(this,e),this.events={},document.body.addEventListener("keydown",(function(e){var a=e.key,n=e.metaKey,r=e.shiftKey;Object.keys(t.events).forEach((function(e){var c=t.events[e].condition,s=c.metaKey,o=c.shiftKey,l=c.key;s===n&&o===r&&l===a&&t.events[e].callback.call()}))}))}return Object(x.a)(e,[{key:"addEvent",value:function(e,t,a){var n=t.metaKey,r=t.shiftKey,c=t.key;this.events[e]||(this.events[e]={condition:{metaKey:n,shiftKey:r,key:c},callback:a})}}]),e}()),S=[345600,115200,56700,19200,9600],T=function(e){var t=e.onStatusChange,a=void 0===t?function(){return!0}:t,c=Object(n.useState)([]),s=Object(o.a)(c,2),l=s[0],u=s[1],p=Object(n.useState)(!1),O=Object(o.a)(p,2),x=O[0],T=O[1],k=Object(n.useState)(),N=Object(o.a)(k,2),w=N[0],C=N[1],R=Object(n.useState)(),D=Object(o.a)(R,2),J=D[0],P=D[1],I=Object(f.a)(),K=I.register,_=I.getValues,L=function(){var e,t,a,n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=_(),t=e.port,a=e.baudRate,r.next=4,m.a.awrap(d.a.post("http://".concat(g.host,":4002/connect"),{port:t,baudRate:a}));case 4:T(!0),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),n=r.t0.response,alert(JSON.stringify(n.data));case 11:case"end":return r.stop()}}),null,null,[[0,7]])},A=function(){var e;return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.awrap(d.a.post("http://".concat(g.host,":4002/disconnect")));case 3:T(!1),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),e=t.t0.response,alert(JSON.stringify(e.data));case 10:case"end":return t.stop()}}),null,null,[[0,6]])};return Object(n.useEffect)((function(){d.a.get("http://".concat(g.host,":4002/list")).then((function(e){var t=e.data;return u(t)})),d.a.get("http://".concat(g.host,":4002/info")).then((function(e){var t=e.data;if("connected"===t.status){var a=t.data,n=a.port,r=a.baudRate;C(n),P(r),T(!0)}else T(!1)})).catch((function(e){return console.log({e:e})})),j.addEvent("connect",{metaKey:!0,shiftKey:!0,key:"s"},(function(){return L()})),j.addEvent("disconnect",{metaKey:!0,shiftKey:!0,key:"x"},(function(){return A()}))}),[]),Object(n.useMemo)((function(){a(x)}),[x,a]),r.a.createElement(E.a,{className:"mt-2"},r.a.createElement(v.a,{row:!0},r.a.createElement(y.a,{sm:1},"Port"),r.a.createElement(i.a,{sm:7},r.a.createElement(h.a,{type:"select",name:"port",value:w,innerRef:K({required:!0})},r.a.createElement("option",{value:"/dev/ROBOT",key:"robot"},"/dev/ROBOT"),l.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),r.a.createElement(i.a,{sm:2},r.a.createElement(h.a,{type:"select",name:"baudRate",value:J,innerRef:K({required:!0})},S.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(i.a,{sm:2},!x&&r.a.createElement(b.a,{type:"button",color:"success",className:"form-control",onClick:L},"Connect"),x&&r.a.createElement(b.a,{type:"button",color:"danger",className:"form-control",onClick:A},"Disconnected"))))},k=a(11);function N(e){if("string"!==typeof e)return!1;try{var t=JSON.parse(e),a=Object.prototype.toString.call(t);return"[object Object]"===a||"[object Array]"===a}catch(n){return!1}}var w=function(e){return{type:"SET_SERIAL_INPUT_TEXT",payload:{inputText:e.inputText}}},C=function(){return function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(d.a.get("http://".concat(g.host,":4002/saves")).catch((function(){return[]})).then((function(e){return e.data.map((function(e){return{id:e.id,header:e.header,data:e.data}}))})));case 2:t=a.sent,e({type:"FETCH_PRESET",payload:t});case 4:case"end":return a.stop()}}))}},R=Object(k.b)((function(e){return{serialInputText:e.input.serialInputText}}),{addRecent:function(e){return{type:"ADD_RECENT",payload:{data:e.data}}}})((function(e){var t=e.connection,a=e.addRecent,c=e.serialInputText,s=Object(f.a)(),l=s.register,i=s.watch,u=s.setValue,p=Object(n.useState)(void 0),O=Object(o.a)(p,2),x=O[0],S=O[1];Object(n.useEffect)((function(){u("jsonText",JSON.stringify(c,null,2))}),[c]);var T=function(){S(void 0);var e=i("jsonText");N(e)?u("jsonText",JSON.stringify(JSON.parse(e),null,2)):S("Json format is invalid")},k=function(e){var t,n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&e.preventDefault(),N(i("jsonText"))){r.next=4;break}return alert("JsonText is invalid"),r.abrupt("return");case 4:return r.prev=4,r.next=7,m.a.awrap(d.a.post("http://".concat(g.host,":4002/commit"),{data:JSON.parse(i("jsonText"))}));case 7:t=JSON.stringify(JSON.parse(i("jsonText"))),a({data:t}),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(4),n=r.t0.response,alert(JSON.stringify(n));case 15:case"end":return r.stop()}}),null,null,[[4,11]])};return j.addEvent("commit",{metaKey:!0,shiftKey:!0,key:"Enter"},(function(){return k()})),j.addEvent("format",{metaKey:!0,shiftKey:!0,key:"l"},(function(){return T()})),r.a.createElement(E.a,{onSubmit:k},r.a.createElement(v.a,null,r.a.createElement(y.a,null,"Input",r.a.createElement("span",{style:{color:"red"}}," ",x)),r.a.createElement(h.a,{type:"textarea",name:"jsonText",disabled:!t,style:{height:"85vh"},innerRef:l({required:!0})})),t&&r.a.createElement("div",{className:"w-100 text-right"},r.a.createElement(b.a,{type:"button",color:"primary",className:"m-1",onClick:T},"Format"),N(i("jsonText"))&&r.a.createElement(b.a,{type:"submit",color:"success",className:"m-1"},"Commit")))})),D=a(65),J=a.n(D)()("http://".concat(g.host,":4002")),P=function(e){var t=e.connection,a=Object(n.useState)(""),c=Object(o.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(!1),u=Object(o.a)(i,2),m=u[0],p=u[1],d=function(e){var t=Object(n.useState)(void 0),a=Object(o.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){J.on(e,(function(e){c(e)}))}),[e]),r}("listening");return Object(n.useEffect)((function(){j.addEvent("clearText",{metaKey:!0,shiftKey:!0,key:"k"},(function(){return l("")}))}),[]),Object(n.useMemo)((function(){if(d){var e=d.type,t=d.data;if("json"===e){if(m)return l("".concat(JSON.stringify(t,null,2),"\r\n"));l("".concat(s).concat(JSON.stringify(t,null,2),"\r\n"))}else{if(m)return l("".concat(t,"\r\n"));l("".concat(s).concat(t,"\r\n"))}}}),[d,m]),r.a.createElement(n.Fragment,null,r.a.createElement(v.a,null,r.a.createElement(y.a,null,"Output"),r.a.createElement(h.a,{type:"textarea",disabled:!t,value:s,style:{height:"85vh",lineHeight:1.2}})),r.a.createElement("div",{className:"w-100 text-right"},r.a.createElement(y.a,{check:!0},r.a.createElement(h.a,{type:"checkbox",checked:m,onChange:function(e){var t=e.target;return p(t.checked)}})," ","Auto-Clear"),r.a.createElement(b.a,{type:"button",color:"primary",className:"ml-3",onClick:function(){return l("")}},"Clear")))},I=a(146),K=a(141),_=a(142),L=a(143),A=Object(k.b)(null,{addPreset:function(e){var t=e.header,a=e.data;return function(e){d.a.post("http://".concat(g.host,":4002/saves"),{header:t,data:a}).catch((function(){return[]})).then((function(){return e(C())})),e(C())}}})((function(e){var t=e.open,a=void 0!==t&&t,n=e.close,c=void 0===n?function(){return null}:n,s=e.addPreset,o=Object(f.a)(),l=o.register,i=o.getValues,u=o.triggerValidation,p=o.errors,d=o.watch,E=o.setValue;return r.a.createElement(I.a,{isOpen:a,toggle:c,size:"lg"},r.a.createElement(K.a,{toggle:c},"Add Preset"),r.a.createElement(_.a,null,r.a.createElement(y.a,null,r.a.createElement("strong",null,"Title")," ",p.title&&r.a.createElement("p",{style:{color:"red"}},"title is required.")),r.a.createElement(h.a,{name:"title",type:"text",size:"lg",innerRef:l({required:!0})}),r.a.createElement(y.a,null,r.a.createElement("strong",null,"Preset data"),p.presetData&&"required"===p.presetData.type&&r.a.createElement("p",{style:{color:"red"}},"preset is required."),p.presetData&&"validate"===p.presetData.type&&r.a.createElement("p",{style:{color:"red"}},"preset must be json format.")),r.a.createElement(h.a,{name:"presetData",type:"textarea",size:"lg",style:{height:"40vh"},innerRef:l({required:!0,validate:function(e){return N(e)}})}),r.a.createElement("div",{className:"w-100 text-right m-2"},N(d("presetData"))&&r.a.createElement(b.a,{type:"button",color:"primary",size:"lg",onClick:function(){var e=d("presetData");E("presetData",JSON.stringify(JSON.parse(e),null,2))}},"Format"))),r.a.createElement(L.a,null,r.a.createElement("div",{className:"w-100 text-right"},r.a.createElement(b.a,{type:"button",color:"danger",size:"lg",onClick:c},"Discard"),r.a.createElement(b.a,{className:"ml-2",type:"button",color:"success",size:"lg",onClick:function(){var e,t,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(u());case 2:if(n.sent){n.next=5;break}return n.abrupt("return",null);case 5:e=i(),t=e.title,a=e.presetData,s({header:t,data:JSON.parse(a)}),c();case 8:case"end":return n.stop()}}))}},"Add Preset"))))})),z=a(144),q=Object(k.b)((function(e){return{presets:e.preset.presets}}),{fetchPreset:C,deletePreset:function(e){return function(t){return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(d.a.post("http://".concat(g.host,":4002/saves/deletes"),{id:e}).catch((function(){return[]})));case 2:t(C()),t({type:"DELETE_PRESET",payload:{}});case 4:case"end":return a.stop()}}))}}})((function(e){var t=e.open,a=void 0!==t&&t,c=e.close,s=void 0===c?function(){return null}:c,o=e.presets,l=e.fetchPreset,i=e.deletePreset;return Object(n.useEffect)((function(){l()}),[]),r.a.createElement(I.a,{isOpen:a,toggle:s,size:"lg"},r.a.createElement(K.a,{toggle:s},"Edit Preset"),r.a.createElement(_.a,null,r.a.createElement(z.a,{responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Data"),r.a.createElement("th",null,"OP"))),r.a.createElement("tbody",null,o.map((function(e){var t=e.id,a=e.header,n=e.data;return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"row"},t),r.a.createElement("td",null,a),r.a.createElement("td",null,JSON.stringify(n).slice(0,50)),r.a.createElement("td",null,r.a.createElement(b.a,{type:"button",color:"danger",size:"sm",style:{width:60},onClick:function(){return i(t)}},"Delete"),r.a.createElement(b.a,{type:"button",color:"primary",size:"sm",style:{width:60},className:"ml-1"},"Edit")))}))))))})),F=Object(k.b)((function(e){return{presets:e.preset.presets}}),{setSerialInputText:w,fetchPreset:C})((function(e){var t=e.setSerialInputText,a=e.presets,c=e.fetchPreset,s=Object(n.useState)(!1),l=Object(o.a)(s,2),u=l[0],m=l[1],p=Object(n.useState)(!1),d=Object(o.a)(p,2),f=d[0],E=d[1];return Object(n.useEffect)((function(){c()}),[]),r.a.createElement(v.a,{row:!0},r.a.createElement(A,{close:function(){return m(!1)},open:u}),r.a.createElement(q,{close:function(){return E(!1)},open:f}),r.a.createElement(y.a,{xs:1},"Preset: "),r.a.createElement(i.a,{xs:7},r.a.createElement(h.a,{type:"select",onChange:function(e){var n=e.target;return-1!==n.value&&t({inputText:a[n.value].data})}},a.map((function(e,t){var a=e.header;e.data;return r.a.createElement("option",{key:t,value:t},a)})))),r.a.createElement(i.a,{xs:2},r.a.createElement(b.a,{type:"button",color:"primary",className:"form-control",onClick:function(){return E(!0)}},"Edit")),r.a.createElement(i.a,{xs:2},r.a.createElement(b.a,{type:"button",color:"success",className:"form-control",onClick:function(){return m(!0)}},"+ Add")))})),V=Object(k.b)((function(e){return{recentList:e.recent.recentList}}),{delRecentAll:function(){return{type:"DELETE_RECENT",payload:{}}},setSerialInputText:w})((function(e){var t=e.recentList,a=e.delRecentAll,n=e.setSerialInputText;return r.a.createElement(v.a,{row:!0},r.a.createElement(y.a,{xs:1},"Recent: "),r.a.createElement(i.a,{xs:7},r.a.createElement(h.a,{type:"select",onChange:function(e){var a=e.target;return-1!==a.value&&n({inputText:JSON.parse(t[a.value])})}},t.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.slice(0,100))})))),r.a.createElement(i.a,{xs:2},r.a.createElement(b.a,{type:"button",color:"danger",className:"form-control",onClick:a},"Clear")))})),B=a(66);var H=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"ml-3 mr-3"},r.a.createElement(T,{onStatusChange:function(e){return c(e)}}),r.a.createElement(l.a,null,r.a.createElement(i.a,{xs:"12"},a&&r.a.createElement(F,null))),r.a.createElement(l.a,null,r.a.createElement(i.a,{xs:"12"},a&&r.a.createElement(V,null))),r.a.createElement(l.a,null,r.a.createElement(i.a,{xs:"6"},r.a.createElement(R,{connection:a})),r.a.createElement(i.a,{xs:"6"},r.a.createElement(P,{connection:a})))),r.a.createElement("span",{className:"position-absolute",style:{bottom:5,left:5}},"version: ",B.version))};a(132),a(133),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=a(19),U=a(67),W=a(15),X=a(20),$={recentList:JSON.parse(localStorage.getItem("recent"))||[]},G={serialInputText:"test"},Q={presets:[]},Y=Object(M.c)({recent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_RECENT":var a=t.payload.data,n=[].concat(Object(X.a)(e.recentList),[a]);return localStorage.setItem("recent",JSON.stringify(n)),Object(W.a)({},e,{recentList:n});case"DELETE_RECENT":return localStorage.removeItem("recent"),Object(W.a)({},e,{recentList:[]});default:return e}},input:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SERIAL_INPUT_TEXT":var a=t.payload.inputText;return Object(W.a)({},e,{serialInputText:a});default:return e}},preset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRESET":return Object(W.a)({},e,{presets:t.payload||[]});case"ADD_PRESET":case"DELETE_PRESET":return Object(W.a)({},e);default:return e}}}),Z=Object(M.a)(U.a)(M.d)(Y);s.a.render(r.a.createElement(k.a,{store:Z},r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},66:function(e){e.exports=JSON.parse('{"name":"client","version":"0.4.1","private":true,"dependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","axios":"^0.19.0","bootstrap":"^4.4.1","react":"^16.12.0","react-dom":"^16.12.0","react-hook-form":"^3.28.15","react-redux":"^7.1.3","react-scripts":"3.3.0","reactstrap":"^8.2.0","redux":"^4.0.5","redux-thunk":"^2.3.0","socket.io-client":"^2.3.0"},"scripts":{"dev":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},68:function(e,t,a){e.exports=a(134)}},[[68,1,2]]]);
//# sourceMappingURL=main.38afdf69.chunk.js.map