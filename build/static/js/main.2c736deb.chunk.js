(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{129:function(e,t){},139:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),o=n.n(c),l=n(18),s=n(6),i=n(9),u=n(152),m=n(145),p=n(4),f=n.n(p),d=n(8),E=n(14),v=n.n(E),b=n(142),y=n(143),h=n(144),O=n(146),g=n(147),j=n(23),x={host:window.location.hostname},N=n(68),T=n(69),k=new(function(){function e(){var t=this;Object(N.a)(this,e),this.events={},document.body.addEventListener("keydown",(function(e){var n=e.key,a=e.metaKey,r=e.shiftKey;Object.keys(t.events).forEach((function(e){var c=t.events[e].condition,o=c.metaKey,l=c.shiftKey,s=c.key;o===a&&l===r&&s===n&&t.events[e].callback.call()}))}))}return Object(T.a)(e,[{key:"addEvent",value:function(e,t,n){var a=t.metaKey,r=t.shiftKey,c=t.key;this.events[e]||(this.events[e]={condition:{metaKey:a,shiftKey:r,key:c},callback:n})}}]),e}()),S=function(e){return{type:"SET_SERIAL_INPUT_TEXT",payload:{inputText:e.inputText}}},w=n(70),C=function(){return function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("http://".concat(x.host,":4002/saves")).catch((function(){return[]})).then((function(e){return e.data.map((function(e){return{id:e.id,header:e.header,data:e.data}}))}));case 2:n=e.sent,t({type:"FETCH_PRESET",payload:Object(w.sortBy)(n,"header")});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R=[345600,115200,56700,19200,9600],D=Object(i.b)((function(e){return{connection:e.connection.connection}}),{setConnection:function(e){return{type:"SET_CONNECTION",payload:e}}})((function(e){var t=e.connection,n=e.setConnection,c=Object(a.useState)([]),o=Object(s.a)(c,2),l=o[0],i=o[1],u=Object(a.useState)(),p=Object(s.a)(u,2),E=p[0],N=p[1],T=Object(a.useState)(),S=Object(s.a)(T,2),w=S[0],C=S[1],D=Object(j.a)(),J=D.register,P=D.getValues,I=function(){var e=Object(d.a)(f.a.mark((function e(){var t,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=P(),a=t.port,r=t.baudRate,e.next=4,v.a.post("http://".concat(x.host,":4002/connect"),{port:a,baudRate:r});case 4:n(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c=e.t0.response,alert(JSON.stringify(c.data));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("http://".concat(x.host,":4002/disconnect"));case 3:n(!1),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),t=e.t0.response,alert(JSON.stringify(t.data));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){v.a.get("http://".concat(x.host,":4002/list")).then((function(e){var t=e.data;return i(t)})),v.a.get("http://".concat(x.host,":4002/info")).then((function(e){var t=e.data;if("connected"===t.status){var a=t.data,r=a.port,c=a.baudRate;N(r),C(c),n(!0)}else n(!1)})).catch((function(e){return console.log({e:e})})),k.addEvent("connect",{metaKey:!0,shiftKey:!0,key:"s"},(function(){return I()})),k.addEvent("disconnect",{metaKey:!0,shiftKey:!0,key:"x"},(function(){return K()}))}),[]),r.a.createElement(b.a,null,r.a.createElement(y.a,{row:!0},r.a.createElement(h.a,{sm:1},r.a.createElement("span",{className:"font-weight-bolder"},"Port: ")),r.a.createElement(m.a,{sm:7},r.a.createElement(O.a,{type:"select",name:"port",value:E,innerRef:J({required:!0})},r.a.createElement("option",{value:"/dev/ROBOT",key:"robot"},"/dev/ROBOT"),l.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),r.a.createElement(m.a,{sm:2},r.a.createElement(O.a,{type:"select",name:"baudRate",value:w,innerRef:J({required:!0})},R.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(m.a,{sm:2},t?r.a.createElement(g.a,{type:"button",color:"danger",className:"form-control",onClick:K},"Close"):r.a.createElement(g.a,{type:"button",color:"success",className:"form-control",onClick:I},"Connect"))))}));function J(e){if("string"!==typeof e)return!1;try{var t=JSON.parse(e),n=Object.prototype.toString.call(t);return"[object Object]"===n||"[object Array]"===n}catch(a){return!1}}var P=Object(i.b)((function(e){return{presets:e.preset.presets}}),{setSerialInputText:S,fetchPreset:C})((function(e){var t=e.presets,n=e.fetchPreset,c=e.onChange,o=void 0===c?function(){return null}:c;return Object(a.useEffect)((function(){n()}),[]),r.a.createElement(O.a,{type:"select",style:{width:"20ch"},onChange:function(e){var n=e.target;return-1!==n.value&&o({inputText:t[n.value].data})}},t.map((function(e,t){var n=e.header;e.data;return r.a.createElement("option",{key:t,value:t},n)})))})),I=Object(i.b)((function(e){var t=e.input,n=e.connection;return{serialInputText:t.serialInputText,connection:n.connection}}),{addRecent:function(e){return{type:"ADD_RECENT",payload:{data:e.data}}}})((function(e){var t=e.connection,n=e.addRecent,c=Object(a.useState)(),o=Object(s.a)(c,2),l=o[0],i=o[1],u=Object(j.a)(),m=u.register,p=u.watch,E=u.setValue,h=Object(a.useState)(void 0),N=Object(s.a)(h,2),T=N[0],S=N[1];Object(a.useEffect)((function(){E("jsonText",JSON.stringify(l,null,2))}),[l]);var w=function(){S(void 0);var e=p("jsonText");J(e)?E("jsonText",JSON.stringify(JSON.parse(e),null,2)):S("Json format is invalid")},C=function(){var e=Object(d.a)(f.a.mark((function e(t){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),J(p("jsonText"))){e.next=4;break}return alert("JsonText is invalid"),e.abrupt("return");case 4:return e.prev=4,e.next=7,v.a.post("http://".concat(x.host,":4002/commit"),{data:JSON.parse(p("jsonText"))});case 7:a=JSON.stringify(JSON.parse(p("jsonText"))),n({data:a}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),r=e.t0.response,alert(JSON.stringify(r));case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return k.addEvent("commit",{metaKey:!0,shiftKey:!0,key:"Enter"},(function(){return C()})),k.addEvent("format",{metaKey:!0,shiftKey:!0,key:"l"},(function(){return w()})),r.a.createElement(b.a,{onSubmit:C},r.a.createElement(y.a,null,r.a.createElement("div",{className:"textarea-container"},r.a.createElement(O.a,{type:"textarea",name:"jsonText",disabled:!t,style:{height:"30vh"},innerRef:m({required:!0})}),r.a.createElement("div",{className:"textarea-container corner-button"},r.a.createElement("span",{style:{color:"red"}}," ",T),t&&r.a.createElement(P,{onChange:function(e){var t=e.inputText;return i(t)}}),r.a.createElement(g.a,{type:"button",color:"primary",className:"mb-1 btn-sm",onClick:w},"Format"),J(p("jsonText"))&&r.a.createElement(g.a,{type:"submit",color:"success",className:"mb-1 btn-sm"},"Commit")))))})),K=n(29),_=n.n(K),L=_()("http://".concat(x.host,":4002")),A=Object(i.b)((function(e){return{connection:e.connection.connection}}))((function(e){var t=e.connection,n=Object(a.useState)(""),c=Object(s.a)(n,2),o=c[0],l=c[1],i=Object(a.useState)(!1),u=Object(s.a)(i,2),m=u[0],p=u[1],f=function(e){var t=Object(a.useState)(void 0),n=Object(s.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){L.on(e,(function(e){c(e)}))}),[e]),r}("listening");return Object(a.useEffect)((function(){k.addEvent("clearText",{metaKey:!0,shiftKey:!0,key:"k"},(function(){return l("")}))}),[]),Object(a.useMemo)((function(){if(f){var e=f.type,t=f.data;if("json"===e){if(m)return l("".concat(JSON.stringify(t,null,2),"\r\n"));l("".concat(o).concat(JSON.stringify(t,null,2),"\r\n"))}else{if(m)return l("".concat(t,"\r\n"));l("".concat(o).concat(t,"\r\n"))}}}),[f,m]),r.a.createElement(y.a,{className:"m-0 p-0"},r.a.createElement("div",{className:"textarea-container"},r.a.createElement(O.a,{type:"textarea",disabled:!t,value:o,style:{height:"45vh",lineHeight:1.2}}),r.a.createElement("div",{className:"textarea-container corner-button"},r.a.createElement(h.a,{check:!0},r.a.createElement(O.a,{type:"checkbox",checked:m,onChange:function(e){var t=e.target;return p(t.checked)}})," ","Auto-Clear"),r.a.createElement(g.a,{type:"button",color:"primary",className:"ml-3 btn-sm",onClick:function(){return l("")}},"Clear"))))})),z=Object(i.b)((function(e){return{recentList:e.recent.recentList}}),{delRecentAll:function(){return{type:"DELETE_RECENT",payload:{}}},setSerialInputText:S})((function(e){var t=e.recentList,n=e.setSerialInputText;return r.a.createElement("div",{className:"d-flex justify-content-start"},r.a.createElement("span",{className:"font-weight-bolder mr-3"},"Recent: "),r.a.createElement(O.a,{type:"select",onChange:function(e){var a=e.target;return-1!==a.value&&n({inputText:JSON.parse(t[a.value])})}},t.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.slice(0,100))}))))})),q=_()("http://".concat(x.host,":4002")),F=function(e){var t=e.connection,n=Object(a.useState)(""),c=Object(s.a)(n,2),o=c[0],l=c[1],i=Object(a.useState)("all"),u=Object(s.a)(i,2),m=u[0],p=u[1],f=Object(a.useState)(""),d=Object(s.a)(f,2),E=d[0],v=d[1],b=Object(a.useState)(!1),y=Object(s.a)(b,1)[0],h=function(e){var t=Object(a.useState)(void 0),n=Object(s.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){q.on(e,(function(e){c(e)}))}),[e]),r}("log");return Object(a.useEffect)((function(){k.addEvent("clearLogText",{metaKey:!0,shiftKey:!0,key:"k"},(function(){return l("")}))}),[]),Object(a.useMemo)((function(){if(h){var e=h.data,t=h.meta;if("all"!==m&&t.level!==m)return;if(""!==E&&t.topic!==E)return;if(y)return l("".concat(e,"\r\n"));l("".concat(o).concat(e,"\r\n"))}}),[h,y]),r.a.createElement("div",{className:"w-100"},r.a.createElement("div",{className:"textarea-container"},r.a.createElement(O.a,{type:"textarea",disabled:!t,value:o,style:{height:"45vh",lineHeight:1.2}}),r.a.createElement("div",{className:"corner-button"},r.a.createElement(O.a,{type:"select",className:"form-control",value:m,onChange:function(e){var t=e.target;p(t.value),l("")}},r.a.createElement("option",{value:"all"},"All"),r.a.createElement("option",{value:"fatal"},"Fatal"),r.a.createElement("option",{value:"error"},"Error"),r.a.createElement("option",{value:"warning"},"Warning"),r.a.createElement("option",{value:"info"},"Info"),r.a.createElement("option",{value:"debug"},"Debug"),r.a.createElement("option",{value:"trace"},"Trace")),r.a.createElement(O.a,{type:"text",className:"form-control",value:E,onChange:function(e){var t=e.target;l(""),v(t.value)}}))))},B=n(153),V=n(148),H=n(149),W=n(150),M=Object(i.b)(null,{addPreset:function(e){var t=e.header,n=e.data;return function(e){v.a.post("http://".concat(x.host,":4002/saves"),{header:t,data:n}).catch((function(){return[]})).then((function(){return e(C())})),e(C())}}})((function(e){var t=e.open,n=void 0!==t&&t,a=e.close,c=void 0===a?function(){return null}:a,o=e.addPreset,l=Object(j.a)(),s=l.register,i=l.getValues,u=l.triggerValidation,m=l.errors,p=l.watch,E=l.setValue;return r.a.createElement(B.a,{isOpen:n,toggle:c,size:"lg"},r.a.createElement(V.a,{toggle:c},"Add Preset"),r.a.createElement(H.a,null,r.a.createElement(h.a,null,r.a.createElement("strong",null,"Title")," ",m.title&&r.a.createElement("p",{style:{color:"red"}},"title is required.")),r.a.createElement(O.a,{name:"title",type:"text",size:"lg",innerRef:s({required:!0})}),r.a.createElement(h.a,null,r.a.createElement("strong",null,"Preset data"),m.presetData&&"required"===m.presetData.type&&r.a.createElement("p",{style:{color:"red"}},"preset is required."),m.presetData&&"validate"===m.presetData.type&&r.a.createElement("p",{style:{color:"red"}},"preset must be json format.")),r.a.createElement(O.a,{name:"presetData",type:"textarea",size:"lg",style:{height:"40vh"},innerRef:s({required:!0,validate:function(e){return J(e)}})}),r.a.createElement("div",{className:"w-100 text-right m-2"},J(p("presetData"))&&r.a.createElement(g.a,{type:"button",color:"primary",size:"lg",onClick:function(){var e=p("presetData");E("presetData",JSON.stringify(JSON.parse(e),null,2))}},"Format"))),r.a.createElement(W.a,null,r.a.createElement("div",{className:"w-100 text-right"},r.a.createElement(g.a,{type:"button",color:"danger",size:"lg",onClick:c},"Discard"),r.a.createElement(g.a,{className:"ml-2",type:"button",color:"success",size:"lg",onClick:Object(d.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:if(e.sent){e.next=5;break}return e.abrupt("return",null);case 5:t=i(),n=t.title,a=t.presetData,o({header:n,data:JSON.parse(a)}),c();case 8:case"end":return e.stop()}}),e)})))},"Add Preset"))))})),U=n(151),X=Object(i.b)((function(e){return{presets:e.preset.presets}}),{fetchPreset:C,deletePreset:function(e){return function(){var t=Object(d.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.post("http://".concat(x.host,":4002/saves/deletes"),{id:e}).catch((function(){return[]}));case 2:n(C()),n({type:"DELETE_PRESET",payload:{}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.open,n=void 0!==t&&t,c=e.close,o=void 0===c?function(){return null}:c,l=e.presets,s=e.fetchPreset,i=e.deletePreset;return Object(a.useEffect)((function(){s()}),[]),r.a.createElement(B.a,{isOpen:n,toggle:o,size:"lg"},r.a.createElement(V.a,{toggle:o},"Edit Preset"),r.a.createElement(H.a,null,r.a.createElement(U.a,{responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Data"),r.a.createElement("th",null,"OP"))),r.a.createElement("tbody",null,l.map((function(e){var t=e.id,n=e.header,a=e.data;return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"row"},t),r.a.createElement("td",null,n),r.a.createElement("td",null,JSON.stringify(a).slice(0,50)),r.a.createElement("td",null,r.a.createElement(g.a,{type:"button",color:"danger",size:"sm",style:{width:60},onClick:function(){return i(t)}},"Delete"),r.a.createElement(g.a,{type:"button",color:"primary",size:"sm",style:{width:60},className:"ml-1"},"Edit")))}))))))})),$=Object(i.b)((function(e){return{presets:e.preset.presets}}),{setSerialInputText:S,fetchPreset:C})((function(e){var t=e.fetchPreset,n=Object(a.useState)(!1),c=Object(s.a)(n,2),o=c[0],l=c[1],i=Object(a.useState)(!1),u=Object(s.a)(i,2),m=u[0],p=u[1];return Object(a.useEffect)((function(){t()}),[]),r.a.createElement("div",null,r.a.createElement(M,{close:function(){return l(!1)},open:o}),r.a.createElement(X,{close:function(){return p(!1)},open:m}),r.a.createElement(g.a,{className:"mr-1",type:"button",color:"primary",onClick:function(){return p(!0)}},"Edit"),r.a.createElement(g.a,{className:"ml-1",type:"button",color:"success",onClick:function(){return l(!0)}},"Add"))}));var G=Object(i.b)((function(e){var t=e.input,n=e.connection;return{serialInputText:t.serialInputText,connection:n.connection}}))((function(e){var t=e.connection,n=Object(a.useState)(1),c=Object(s.a)(n,2),o=c[0],i=c[1];return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"ml-3 mr-3 mt-3"},r.a.createElement(u.a,null,r.a.createElement(m.a,{xs:"5"},r.a.createElement(D,null)),r.a.createElement(m.a,{xs:"7"},r.a.createElement(u.a,null,r.a.createElement(m.a,{xs:8},t&&r.a.createElement(z,null)),r.a.createElement(m.a,{xs:4},r.a.createElement($,null))))),r.a.createElement(u.a,null,r.a.createElement(m.a,{xs:"5",style:{padding:1}},Object(l.a)(Array(o)).map((function(e,t){return r.a.createElement(I,{key:t})})),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-circle btn-md m-1 p-0",onClick:function(){return i(o+1)}},r.a.createElement("span",{style:{fontSize:"1.5rem"}},"+")),o>0&&r.a.createElement("button",{type:"button",className:"btn btn-danger btn-circle btn-md m-1  p-0",onClick:function(){return i(o<=0?0:o-1)}},r.a.createElement("span",{style:{fontSize:"1.5rem"}},"-")))),r.a.createElement(m.a,{xs:"7",style:{padding:1}},r.a.createElement(A,null),r.a.createElement(F,null)))))}));n(139),n(140),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=n(21),Y=n(71),Z=n(13),ee={recentList:JSON.parse(localStorage.getItem("recent"))||[]},te={serialInputText:"test"},ne={presets:[]},ae={connection:!1},re=Object(Q.c)({recent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_RECENT":var n=t.payload.data,a=[].concat(Object(l.a)(e.recentList),[n]);return localStorage.setItem("recent",JSON.stringify(a)),Object(Z.a)({},e,{recentList:a});case"DELETE_RECENT":return localStorage.removeItem("recent"),Object(Z.a)({},e,{recentList:[]});default:return e}},input:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SERIAL_INPUT_TEXT":var n=t.payload.inputText;return Object(Z.a)({},e,{serialInputText:n});default:return e}},preset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRESET":return Object(Z.a)({},e,{presets:t.payload||[]});case"ADD_PRESET":case"DELETE_PRESET":return Object(Z.a)({},e);default:return e}},connection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONNECTION":return Object(Z.a)({},e,{connection:t.payload});default:return e}}}),ce=Object(Q.a)(Y.a)(Q.d)(re),oe=n(72);o.a.render(r.a.createElement(i.a,{store:ce},r.a.createElement(G,null),r.a.createElement("span",{className:"position-relative",style:{bottom:0,right:0}},"version: ",oe.version)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},72:function(e){e.exports=JSON.parse('{"name":"client","version":"0.8.0","private":true,"dependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","@types/reactstrap":"^8.4.2","axios":"^0.19.0","bootstrap":"^4.4.1","lodash":"^4.17.15","react":"^16.12.0","react-dom":"^16.12.0","react-hook-form":"^3.28.15","react-redux":"^7.1.3","react-scripts":"^3.4.0","reactstrap":"^8.2.0","redux":"^4.0.5","redux-thunk":"^2.3.0","socket.io-client":"^2.3.0"},"scripts":{"dev":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},73:function(e,t,n){e.exports=n(141)}},[[73,1,2]]]);
//# sourceMappingURL=main.2c736deb.chunk.js.map